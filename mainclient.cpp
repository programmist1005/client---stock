#include "mainclient.h"
#include "clientsocketadapter.h"

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString dragNumberQML;
QString dragSourseQML;
QString dragIQML;
QString dragJQML;
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString targetNumberQML;
QString targetSourseQML;
QString targetIQML;
QString targetJQML;
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
int i = 1;
bool wrt = false;
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
MainClient::MainClient(QObject *parent) : QObject(parent), m_pSock(new ClientSocketAdapter(this))
{
    connect(m_pSock, SIGNAL(message(QString)), SLOT(on_message(QString)));
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void MainClient::on_message(QString text)
{

    wrt = true;
    //------------------------------------------------------------------------------------------------------------
    if ( i == 8 && wrt == true ) {
        targetJQML = text;
        i = 1;
        wrt = false;
        emit someMessage();
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 7 && wrt == true ) {
        targetIQML = text;
        i = 8;
        wrt = false;
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 6 && wrt == true ) {
        targetNumberQML = text;
        i = 7;
        wrt = false;
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 5 && wrt == true ) {
        targetSourseQML = text;
        i = 6;
        wrt = false;
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 4 && wrt == true ) {
        dragJQML = text;
        i = 5;
        wrt = false;
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 3 && wrt == true ) {
        dragIQML = text;
        i = 4;
        wrt = false;
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 2 && wrt == true ) {
        dragSourseQML = text;
        i = 3;
        wrt = false;
    }
    //------------------------------------------------------------------------------------------------------------
    if ( i == 1 && wrt == true) {
        dragNumberQML = text;
        i = 2;
        wrt = false;
    }
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void MainClient::on_send(QString msg_send)
{
    m_pSock->sendString(msg_send);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCdragNumber()
{
    return dragNumberQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCdragSourse()
{
    return dragSourseQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCdragI()
{
    return dragIQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCdragJ()
{
    return dragJQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCtargetNumber()
{
    return targetNumberQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCtargetSourse()
{
    return targetSourseQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCtargetI()
{
    return targetIQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
QString MainClient::getOutCtargetJ()
{
    return targetJQML;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
